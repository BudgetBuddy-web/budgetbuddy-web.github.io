"use strict";(self.webpackChunkbudgetbuddy_client=self.webpackChunkbudgetbuddy_client||[]).push([[787],{8787:(e,a,s)=>{s.r(a),s.d(a,{default:()=>m});var t=s(9379),n=s(5043),c=s(6305),l=s(4570),o=s(2145),r=s(5917),d=s(579);const i=["Food","Travel","Entertainment","Shopping","Healthcare","Education","Utilities","Rent","Salary","Freelance","Investment","Other"],m=()=>{const{celebrate:e,shock:a,think:s}=(0,l.w)(),[m,h]=(0,n.useState)([]),[y,u]=(0,n.useState)(!0),[x,p]=(0,n.useState)(!1),[j,b]=(0,n.useState)(null),[N,g]=(0,n.useState)({key:"date",direction:"desc"}),[f,v]=(0,n.useState)({type:"expense",category:"Food",amount:"",date:(0,r.A)(new Date,"yyyy-MM-dd'T'HH:mm:ss"),note:""});(0,n.useEffect)(()=>{k()},[]);const k=async()=>{try{const e=await c.FU.getAll();h(e.data)}catch(e){o.oR.error("Failed to load transactions"),console.error(e)}finally{u(!1)}},w=e=>{const{name:a,value:s}=e.target;v(e=>(0,t.A)((0,t.A)({},e),{},{[a]:s}))},C=e=>{let a="asc";N.key===e&&"asc"===N.direction&&(a="desc"),g({key:e,direction:a})},A=()=>{v({type:"expense",category:"Food",amount:"",date:(0,r.A)(new Date,"yyyy-MM-dd'T'HH:mm:ss"),note:""}),b(null),p(!1)};return y?(0,d.jsx)("div",{className:"loading",children:(0,d.jsx)("div",{className:"spinner"})}):(0,d.jsxs)("div",{className:"transactions-page",children:[(0,d.jsxs)("div",{className:"page-header flex-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{children:"Transactions"}),(0,d.jsx)("p",{children:"Manage your income and expenses"})]}),(0,d.jsx)("button",{className:"btn btn-primary",onClick:()=>{b(null),v({type:"expense",category:"Food",amount:"",date:(0,r.A)(new Date,"yyyy-MM-dd'T'HH:mm:ss"),note:""}),p(!0)},children:"+ Add Transaction"})]}),(0,d.jsx)("div",{className:"card",children:m.length>0?(0,d.jsx)("div",{className:"table-responsive",children:(0,d.jsxs)("table",{className:"transactions-table",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsxs)("th",{onClick:()=>C("date"),className:"sortable",children:["Date ","date"===N.key&&("asc"===N.direction?"\u25b2":"\u25bc")]}),(0,d.jsxs)("th",{onClick:()=>C("type"),className:"sortable",children:["Type ","type"===N.key&&("asc"===N.direction?"\u25b2":"\u25bc")]}),(0,d.jsxs)("th",{onClick:()=>C("category"),className:"sortable",children:["Category ","category"===N.key&&("asc"===N.direction?"\u25b2":"\u25bc")]}),(0,d.jsxs)("th",{onClick:()=>C("amount"),className:"sortable",children:["Amount ","amount"===N.key&&("asc"===N.direction?"\u25b2":"\u25bc")]}),(0,d.jsx)("th",{children:"Note"}),(0,d.jsx)("th",{children:"Actions"})]})}),(0,d.jsx)("tbody",{children:[...m].sort((e,a)=>{let s,t;switch(N.key){case"date":s=new Date(e.date),t=new Date(a.date);break;case"type":s=e.type,t=a.type;break;case"category":s=e.category,t=a.category;break;case"amount":s=e.amount,t=a.amount;break;default:return 0}return s<t?"asc"===N.direction?-1:1:s>t?"asc"===N.direction?1:-1:0}).map(e=>(0,d.jsxs)("tr",{children:[(0,d.jsxs)("td",{children:[(0,d.jsx)("div",{children:(0,r.A)(new Date(e.date),"MMM dd, yyyy")}),(0,d.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:(0,r.A)(new Date(e.date),"HH:mm:ss")})]}),(0,d.jsx)("td",{children:(0,d.jsx)("span",{className:"badge ".concat(e.type),children:e.type})}),(0,d.jsx)("td",{children:e.category}),(0,d.jsxs)("td",{className:"amount ".concat(e.type),children:["income"===e.type?"+":"-","\u20b9",e.amount.toFixed(2)]}),(0,d.jsx)("td",{children:e.note||"-"}),(0,d.jsx)("td",{children:(0,d.jsxs)("div",{className:"action-buttons",children:[(0,d.jsx)("button",{className:"btn-action edit",onClick:()=>(e=>{b(e),v({type:e.type,category:e.category,amount:e.amount.toString(),date:(0,r.A)(new Date(e.date),"yyyy-MM-dd'T'HH:mm:ss"),note:e.note||""}),p(!0)})(e),children:"\u270f\ufe0f"}),(0,d.jsx)("button",{className:"btn-action delete",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this transaction?"))try{await c.FU.delete(e),o.oR.success("Transaction deleted successfully"),k()}catch(a){o.oR.error("Failed to delete transaction"),console.error(a)}})(e._id),children:"\ud83d\uddd1\ufe0f"})]})})]},e._id))})]})}):(0,d.jsx)("div",{className:"empty-state",children:(0,d.jsx)("p",{children:"No transactions yet. Add your first transaction!"})})}),x&&(0,d.jsx)("div",{className:"modal-overlay",onClick:A,children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h2",{children:j?"Edit Transaction":"Add Transaction"}),(0,d.jsx)("button",{className:"btn-close",onClick:A,children:"\u2715"})]}),(0,d.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s();try{j?(await c.FU.update(j._id,f),o.oR.success("Transaction updated successfully")):(await c.FU.create(f),o.oR.success("Transaction added successfully"),"income"===f.type?e():parseFloat(f.amount)>1e3&&a()),k(),A()}catch(n){o.oR.error("Failed to save transaction"),console.error(n)}},className:"transaction-form",children:[(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{className:"form-label",children:"Type"}),(0,d.jsxs)("select",{name:"type",value:f.type,onChange:w,className:"form-select",children:[(0,d.jsx)("option",{value:"income",children:"Income"}),(0,d.jsx)("option",{value:"expense",children:"Expense"})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{className:"form-label",children:"Category"}),(0,d.jsx)("select",{name:"category",value:f.category,onChange:w,className:"form-select",children:i.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]})]}),(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{className:"form-label",children:"Amount"}),(0,d.jsx)("input",{type:"number",name:"amount",value:f.amount,onChange:w,className:"form-control",placeholder:"0.00",step:"0.01",required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{className:"form-label",children:"Date & Time"}),(0,d.jsx)("input",{type:"datetime-local",name:"date",value:f.date,onChange:w,className:"form-control",step:"1",required:!0}),(0,d.jsx)("small",{className:"form-text",style:{fontSize:"12px",color:"#888"},children:"\u23f0 Auto-filled with current time. Click to change manually."})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{className:"form-label",children:"Note (optional)"}),(0,d.jsx)("textarea",{name:"note",value:f.note,onChange:w,className:"form-control",rows:"3",placeholder:"Add a note..."})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:A,children:"Cancel"}),(0,d.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[j?"Update":"Add"," Transaction"]})]})]})]})})]})}}}]);
//# sourceMappingURL=787.f41f0ec3.chunk.js.map