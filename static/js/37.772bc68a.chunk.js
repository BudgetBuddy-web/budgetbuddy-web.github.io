"use strict";(self.webpackChunkbudgetbuddy_client=self.webpackChunkbudgetbuddy_client||[]).push([[37],{9037:(s,e,a)=>{a.r(e),a.d(e,{default:()=>o});var t=a(5043),c=a(5016),n=a(4570),i=a(4505),l=a(2145),d=a(579);const r=(0,t.lazy)(()=>Promise.all([a.e(58),a.e(464)]).then(a.bind(a,9464))),o=()=>{const{user:s}=(0,c.A)(),{celebrate:e,worry:a,encourage:o,idle:h}=(0,n.w)(),[m,x]=(0,t.useState)(null),[v,g]=(0,t.useState)([]),[j,u]=(0,t.useState)(!0),[p,N]=(0,t.useState)("current-month"),y=(0,t.useCallback)(()=>{if(m){const{totalIncome:s,totalExpenses:t}=m.summary,c=s>0?(s-t)/s*100:0;c>=60?e():c>=40?h():c>=20?o():a()}},[m,e,o,h,a]);(0,t.useEffect)(()=>{b()},[p]),(0,t.useEffect)(()=>{y()},[y]);const b=async()=>{try{const e=(await i.FU.getAll()).data;if(g(e.slice(0,5)),"all-time"===p){const a=e.filter(s=>"income"===s.type).reduce((s,e)=>s+e.amount,0),t=e.filter(s=>"expense"===s.type).reduce((s,e)=>s+e.amount,0),c=a-t,n={};e.filter(s=>"expense"===s.type).forEach(s=>{n[s.category]=(n[s.category]||0)+s.amount});const i=(null===s||void 0===s?void 0:s.savingsGoal)||2e4,l=c,d=a>0?(l/a*100).toFixed(1):0,r=[];l>=i?r.push("Excellent! You saved \u20b9".concat(l.toFixed(2),", exceeding your goal by \u20b9").concat((l-i).toFixed(2))):l>0?r.push("You saved \u20b9".concat(l.toFixed(2)," (").concat(d,"% of income)")):l<0&&r.push("Warning: You spent \u20b9".concat(Math.abs(l).toFixed(2)," more than you earned"));const o=Object.entries(n).sort((s,e)=>e[1]-s[1])[0];o&&r.push("Your highest expense category is ".concat(o[0]," (\u20b9").concat(o[1].toFixed(2),")")),x({period:{display:"All Time"},summary:{totalIncome:a,totalExpenses:t,balance:c,savingsGoal:i,savings:l,savingsPercentage:d},categoryBreakdown:n,insights:r,transactionCount:{income:e.filter(s=>"income"===s.type).length,expense:e.filter(s=>"expense"===s.type).length,total:e.length}})}else{const s=await i.Pt.getSummary();x(s.data)}}catch(e){l.oR.error("Failed to load dashboard data"),console.error(e)}finally{u(!1)}};if(j)return(0,d.jsx)("div",{className:"loading",children:(0,d.jsx)("div",{className:"spinner"})});if(!m)return(0,d.jsx)("div",{className:"container",children:"No data available"});const{totalIncome:f,totalExpenses:F,balance:w,savingsGoal:k,savings:E,savingsPercentage:S}=m.summary,{categoryBreakdown:C,insights:I}=m,T=k>0?E/k*100:0;return(0,d.jsxs)("div",{className:"dashboard",children:[(0,d.jsxs)("div",{className:"dashboard-header",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h1",{children:["Welcome back, ",null===s||void 0===s?void 0:s.name,"! \ud83d\udc4b"]}),(0,d.jsx)("p",{children:"Here's your financial overview"})]}),(0,d.jsxs)("div",{className:"view-toggle",children:[(0,d.jsx)("button",{className:"toggle-btn ".concat("current-month"===p?"active":""),onClick:()=>N("current-month"),children:"\ud83d\udcc5 This Month"}),(0,d.jsx)("button",{className:"toggle-btn ".concat("all-time"===p?"active":""),onClick:()=>N("all-time"),children:"\ud83c\udf0d All Time"})]})]}),(0,d.jsxs)("div",{className:"grid grid-4 mb-4",children:[(0,d.jsxs)("div",{className:"stat-card income",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb0"}),(0,d.jsxs)("div",{className:"stat-info",children:[(0,d.jsx)("p",{className:"stat-label",children:"Total Income"}),(0,d.jsxs)("h2",{className:"stat-value",children:["\u20b9",f.toFixed(2)]})]})]}),(0,d.jsxs)("div",{className:"stat-card expense",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb8"}),(0,d.jsxs)("div",{className:"stat-info",children:[(0,d.jsx)("p",{className:"stat-label",children:"Total Expenses"}),(0,d.jsxs)("h2",{className:"stat-value",children:["\u20b9",F.toFixed(2)]})]})]}),(0,d.jsxs)("div",{className:"stat-card balance",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb5"}),(0,d.jsxs)("div",{className:"stat-info",children:[(0,d.jsx)("p",{className:"stat-label",children:"Balance"}),(0,d.jsxs)("h2",{className:"stat-value",children:["\u20b9",w.toFixed(2)]})]})]}),(0,d.jsxs)("div",{className:"stat-card savings",children:[(0,d.jsx)("div",{className:"stat-icon",children:"\ud83c\udfaf"}),(0,d.jsxs)("div",{className:"stat-info",children:[(0,d.jsx)("p",{className:"stat-label",children:"Savings Goal"}),(0,d.jsxs)("h2",{className:"stat-value",children:["\u20b9",k.toFixed(2)]})]})]})]}),(0,d.jsxs)("div",{className:"card mb-4",children:[(0,d.jsx)("h3",{className:"card-title",children:"Savings Progress"}),(0,d.jsxs)("div",{className:"budget-progress",children:[(0,d.jsx)("div",{className:"progress-bar",children:(0,d.jsx)("div",{className:"progress-fill ".concat(T>=100?"good-savings":T<10?"low-savings":""),style:{width:"".concat(Math.min(T,100),"%")}})}),(0,d.jsxs)("div",{className:"progress-info",children:[(0,d.jsxs)("span",{children:[T.toFixed(1),"% of goal achieved"]}),(0,d.jsxs)("span",{children:["\u20b9",E.toFixed(2)," saved / \u20b9",k.toFixed(2)," goal"]})]}),(0,d.jsx)("div",{className:"progress-info",style:{marginTop:"8px",fontSize:"14px",color:"#666"},children:(0,d.jsxs)("span",{children:["\ud83d\udca1 Savings rate: ",S.toFixed(1),"% of income"]})})]})]}),I.length>0&&(0,d.jsxs)("div",{className:"card mb-4",children:[(0,d.jsx)("h3",{className:"card-title",children:"\ud83d\udca1 Insights"}),(0,d.jsx)("ul",{className:"insights-list",children:I.map((s,e)=>(0,d.jsx)("li",{children:s},e))})]}),(0,d.jsx)(t.Suspense,{fallback:(0,d.jsxs)("div",{className:"grid grid-2 mb-4",children:[(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("h3",{className:"card-title",children:"Category Breakdown"}),(0,d.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Loading charts..."})]}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("h3",{className:"card-title",children:"Income vs Expenses"}),(0,d.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Loading charts..."})]})]}),children:(0,d.jsx)(r,{categoryBreakdown:C,totalIncome:f,totalExpenses:F})}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("h3",{className:"card-title",children:"Recent Transactions"}),v.length>0?(0,d.jsx)("div",{className:"transactions-list",children:v.map(s=>(0,d.jsxs)("div",{className:"transaction-item",children:[(0,d.jsx)("div",{className:"transaction-icon",children:"income"===s.type?"\ud83d\udcb0":"\ud83d\udcb8"}),(0,d.jsxs)("div",{className:"transaction-details",children:[(0,d.jsx)("p",{className:"transaction-category",children:s.category}),(0,d.jsx)("p",{className:"transaction-note",children:s.note||"No description"})]}),(0,d.jsxs)("div",{className:"transaction-amount ".concat(s.type),children:["income"===s.type?"+":"-","\u20b9",s.amount.toFixed(2)]})]},s._id))}):(0,d.jsx)("p",{className:"text-center",children:"No transactions yet"})]})]})}}}]);
//# sourceMappingURL=37.772bc68a.chunk.js.map