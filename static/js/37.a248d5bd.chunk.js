"use strict";(self.webpackChunkbudgetbuddy_client=self.webpackChunkbudgetbuddy_client||[]).push([[37],{9037:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var t=a(5043),c=a(5016),n=a(4570),i=a(4505),l=a(2145),r=a(579);const d=(0,t.lazy)(()=>Promise.all([a.e(58),a.e(464)]).then(a.bind(a,9464))),o=()=>{const{user:e}=(0,c.A)(),{celebrate:s,worry:a,encourage:o,idle:m}=(0,n.w)(),[h,x]=(0,t.useState)(null),[g,v]=(0,t.useState)([]),[u,j]=(0,t.useState)(!0),[N,p]=(0,t.useState)("current-month"),b=(0,t.useCallback)(()=>{if(h&&h.summary){const e=Number(h.summary.totalIncome)||0,t=Number(h.summary.totalExpenses)||0,c=e>0?(e-t)/e*100:0;c>=60?s():c>=40?m():c>=20?o():a()}},[h,s,o,m,a]);(0,t.useEffect)(()=>{y()},[N]),(0,t.useEffect)(()=>{b()},[b]);const y=async()=>{try{const s=(await i.FU.getAll()).data;if(v(s.slice(0,5)),"all-time"===N){const a=s.filter(e=>"income"===e.type).reduce((e,s)=>e+s.amount,0),t=s.filter(e=>"expense"===e.type).reduce((e,s)=>e+s.amount,0),c=a-t,n={};s.filter(e=>"expense"===e.type).forEach(e=>{n[e.category]=(n[e.category]||0)+e.amount});const i=(null===e||void 0===e?void 0:e.savingsGoal)||2e4,l=c,r=a>0?l/a*100:0,d=[];l>=i?d.push("Excellent! You saved \u20b9".concat(l.toFixed(2),", exceeding your goal by \u20b9").concat((l-i).toFixed(2))):l>0?d.push("You saved \u20b9".concat(l.toFixed(2)," (").concat(r.toFixed(1),"% of income)")):l<0&&d.push("Warning: You spent \u20b9".concat(Math.abs(l).toFixed(2)," more than you earned"));const o=Object.entries(n).sort((e,s)=>s[1]-e[1])[0];o&&d.push("Your highest expense category is ".concat(o[0]," (\u20b9").concat(o[1].toFixed(2),")")),x({period:{display:"All Time"},summary:{totalIncome:a,totalExpenses:t,balance:c,savingsGoal:i,savings:l,savingsPercentage:r},categoryBreakdown:n,insights:d,transactionCount:{income:s.filter(e=>"income"===e.type).length,expense:s.filter(e=>"expense"===e.type).length,total:s.length}})}else{const e=await i.Pt.getSummary();x(e.data)}}catch(s){l.oR.error("Failed to load dashboard data"),console.error(s)}finally{j(!1)}};if(u)return(0,r.jsx)("div",{className:"loading",children:(0,r.jsx)("div",{className:"spinner"})});if(!h)return(0,r.jsx)("div",{className:"container",children:"No data available"});const{totalIncome:f,totalExpenses:F,balance:w,savingsGoal:k,savings:E,savingsPercentage:S}=h.summary,{categoryBreakdown:C,insights:I}=h,T=Number(f)||0,A=Number(F)||0,B=Number(w)||0,P=Number(k)||2e4,G=Number(E)||0,Y=Number(S)||0,M=P>0?G/P*100:0;return(0,r.jsxs)("div",{className:"dashboard",children:[(0,r.jsxs)("div",{className:"dashboard-header",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{children:["Welcome back, ",null===e||void 0===e?void 0:e.name,"! \ud83d\udc4b"]}),(0,r.jsx)("p",{children:"Here's your financial overview"})]}),(0,r.jsxs)("div",{className:"view-toggle",children:[(0,r.jsx)("button",{className:"toggle-btn ".concat("current-month"===N?"active":""),onClick:()=>p("current-month"),children:"\ud83d\udcc5 This Month"}),(0,r.jsx)("button",{className:"toggle-btn ".concat("all-time"===N?"active":""),onClick:()=>p("all-time"),children:"\ud83c\udf0d All Time"})]})]}),(0,r.jsxs)("div",{className:"grid grid-4 mb-4",children:[(0,r.jsxs)("div",{className:"stat-card income",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb0"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Total Income"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",T.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"stat-card expense",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb8"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Total Expenses"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",A.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"stat-card balance",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb5"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Balance"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",B.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"stat-card goal",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83c\udfaf"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Savings Goal"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",P.toFixed(2)]})]})]})]}),(0,r.jsxs)("div",{className:"card mb-4",children:[(0,r.jsx)("h3",{className:"card-title",children:"Savings Progress"}),(0,r.jsxs)("div",{className:"budget-progress",children:[(0,r.jsx)("div",{className:"progress-bar",children:(0,r.jsx)("div",{className:"progress-fill ".concat(M>=100?"good-savings":M<10?"low-savings":""),style:{width:"".concat(Math.min(M,100),"%")}})}),(0,r.jsxs)("div",{className:"progress-info",children:[(0,r.jsxs)("span",{children:[M.toFixed(1),"% of goal achieved"]}),(0,r.jsxs)("span",{children:["\u20b9",G.toFixed(2)," saved / \u20b9",P.toFixed(2)," goal"]})]}),(0,r.jsx)("div",{className:"progress-info",style:{marginTop:"8px",fontSize:"14px",color:"#666"},children:(0,r.jsxs)("span",{children:["\ud83d\udca1 Savings rate: ",Y.toFixed(1),"% of income"]})})]})]}),I.length>0&&(0,r.jsxs)("div",{className:"card mb-4",children:[(0,r.jsx)("h3",{className:"card-title",children:"\ud83d\udca1 Insights"}),(0,r.jsx)("ul",{className:"insights-list",children:I.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]}),(0,r.jsx)(t.Suspense,{fallback:(0,r.jsxs)("div",{className:"grid grid-2 mb-4",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{className:"card-title",children:"Category Breakdown"}),(0,r.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Loading charts..."})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{className:"card-title",children:"Income vs Expenses"}),(0,r.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Loading charts..."})]})]}),children:(0,r.jsx)(d,{categoryBreakdown:C,totalIncome:f,totalExpenses:F})}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{className:"card-title",children:"Recent Transactions"}),g.length>0?(0,r.jsx)("div",{className:"transactions-list",children:g.map(e=>(0,r.jsxs)("div",{className:"transaction-item",children:[(0,r.jsx)("div",{className:"transaction-icon",children:"income"===e.type?"\ud83d\udcb0":"\ud83d\udcb8"}),(0,r.jsxs)("div",{className:"transaction-details",children:[(0,r.jsx)("p",{className:"transaction-category",children:e.category}),(0,r.jsx)("p",{className:"transaction-note",children:e.note||"No description"})]}),(0,r.jsxs)("div",{className:"transaction-amount ".concat(e.type),children:["income"===e.type?"+":"-","\u20b9",e.amount.toFixed(2)]})]},e._id))}):(0,r.jsx)("p",{className:"text-center",children:"No transactions yet"})]})]})}}}]);
//# sourceMappingURL=37.a248d5bd.chunk.js.map