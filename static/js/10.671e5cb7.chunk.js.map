{"version":3,"file":"static/js/10.671e5cb7.chunk.js","mappings":"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","sources":["pages/AdminRequests.js"],"sourcesContent":["/**\n * Admin Requests Page\n * View and manage pending admin access requests\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Container, Card, Table, Button, Badge, Alert } from 'react-bootstrap';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport './AdminRequests.css';\n\nconst AdminRequests = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [requests, setRequests] = useState([]);\n  const [processing, setProcessing] = useState(null);\n\n  // Redirect if not admin\n  useEffect(() => {\n    if (user && user.role !== 'admin') {\n      toast.error('Access denied. Admin only.');\n      navigate('/dashboard');\n    }\n  }, [user, navigate]);\n\n  // Fetch admin requests\n  useEffect(() => {\n    fetchRequests();\n  }, []);\n\n  const fetchRequests = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('token');\n      const response = await axios.get(\n        `${process.env.REACT_APP_API_URL || 'http://localhost:5000/api'}/admin/requests`,\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setRequests(response.data.data.requests);\n    } catch (error) {\n      console.error('Error fetching requests:', error);\n      toast.error('Failed to load admin requests');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleApprove = async (userId, userName) => {\n    if (!window.confirm(`Are you sure you want to approve ${userName} as admin?`)) {\n      return;\n    }\n\n    try {\n      setProcessing(userId);\n      const token = localStorage.getItem('token');\n      await axios.put(\n        `${process.env.REACT_APP_API_URL || 'http://localhost:5000/api'}/admin/requests/${userId}/approve`,\n        {},\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      \n      toast.success(`‚úÖ ${userName} has been promoted to admin!`);\n      fetchRequests(); // Refresh the list\n    } catch (error) {\n      console.error('Error approving request:', error);\n      toast.error('Failed to approve request');\n    } finally {\n      setProcessing(null);\n    }\n  };\n\n  const handleReject = async (userId, userName) => {\n    if (!window.confirm(`Are you sure you want to reject ${userName}'s admin request?`)) {\n      return;\n    }\n\n    try {\n      setProcessing(userId);\n      const token = localStorage.getItem('token');\n      await axios.put(\n        `${process.env.REACT_APP_API_URL || 'http://localhost:5000/api'}/admin/requests/${userId}/reject`,\n        {},\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      \n      toast.success(`‚ùå ${userName}'s request has been rejected`);\n      fetchRequests(); // Refresh the list\n    } catch (error) {\n      console.error('Error rejecting request:', error);\n      toast.error('Failed to reject request');\n    } finally {\n      setProcessing(null);\n    }\n  };\n\n  const formatDate = (date) => {\n    return new Date(date).toLocaleString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (loading) {\n    return (\n      <Container className=\"admin-requests mt-5\">\n        <div className=\"text-center\">\n          <div className=\"spinner-border text-purple\" role=\"status\">\n            <span className=\"visually-hidden\">Loading...</span>\n          </div>\n          <p className=\"mt-3\">Loading admin requests...</p>\n        </div>\n      </Container>\n    );\n  }\n\n  return (\n    <Container className=\"admin-requests\" fluid>\n      <div className=\"requests-header\">\n        <div>\n          <h1>üëë Admin Access Requests</h1>\n          <p className=\"text-muted\">Review and approve admin access requests</p>\n        </div>\n        <Button variant=\"outline-primary\" onClick={() => navigate('/admin')}>\n          ‚Üê Back to Dashboard\n        </Button>\n      </div>\n\n      {requests.length === 0 ? (\n        <Card className=\"no-requests-card\">\n          <Card.Body className=\"text-center py-5\">\n            <div className=\"empty-icon\">‚úì</div>\n            <h3>No Pending Requests</h3>\n            <p className=\"text-muted\">\n              There are currently no pending admin access requests.\n            </p>\n          </Card.Body>\n        </Card>\n      ) : (\n        <Card className=\"requests-card\">\n          <Card.Header>\n            <h5>\n              üìã Pending Requests \n              <Badge bg=\"warning\" className=\"ms-2\">{requests.length}</Badge>\n            </h5>\n          </Card.Header>\n          <Card.Body>\n            <Table responsive hover className=\"requests-table\">\n              <thead>\n                <tr>\n                  <th>#</th>\n                  <th>Name</th>\n                  <th>Email</th>\n                  <th>Requested On</th>\n                  <th>Current Role</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {requests.map((request, index) => (\n                  <tr key={request._id}>\n                    <td>{index + 1}</td>\n                    <td>\n                      <div className=\"user-info\">\n                        <img \n                          src={request.profilePic} \n                          alt={request.name}\n                          className=\"user-avatar\"\n                        />\n                        <strong>{request.name}</strong>\n                      </div>\n                    </td>\n                    <td>{request.email}</td>\n                    <td>{formatDate(request.adminRequestedAt)}</td>\n                    <td>\n                      <Badge bg=\"secondary\">User</Badge>\n                    </td>\n                    <td>\n                      <div className=\"action-buttons\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"success\"\n                          onClick={() => handleApprove(request._id, request.name)}\n                          disabled={processing === request._id}\n                        >\n                          {processing === request._id ? (\n                            <>\n                              <span className=\"spinner-border spinner-border-sm me-1\"></span>\n                              Processing...\n                            </>\n                          ) : (\n                            <>‚úì Approve</>\n                          )}\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"danger\"\n                          onClick={() => handleReject(request._id, request.name)}\n                          disabled={processing === request._id}\n                          className=\"ms-2\"\n                        >\n                          ‚úó Reject\n                        </Button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </Table>\n          </Card.Body>\n        </Card>\n      )}\n\n      <Alert variant=\"info\" className=\"mt-4\">\n        <Alert.Heading>‚ÑπÔ∏è About Admin Requests</Alert.Heading>\n        <p className=\"mb-0\">\n          When users register and check \"Request Admin Access\", their request appears here. \n          As an admin, you can approve or reject these requests. Approved users will be promoted \n          to admin role and gain access to all admin features.\n        </p>\n      </Alert>\n    </Container>\n  );\n};\n\nexport default AdminRequests;\n"],"names":["AdminRequests","user","useAuth","navigate","useNavigate","loading","setLoading","useState","requests","setRequests","processing","setProcessing","useEffect","role","toast","error","fetchRequests","async","token","localStorage","getItem","response","axios","get","concat","process","headers","Authorization","data","console","_jsx","Container","className","children","_jsxs","fluid","Button","variant","onClick","length","Card","Body","Header","Badge","bg","Table","responsive","hover","map","request","index","src","profilePic","alt","name","email","date","adminRequestedAt","Date","toLocaleString","year","month","day","hour","minute","size","userId","userName","window","confirm","put","success","handleApprove","_id","disabled","_Fragment","handleReject","Alert","Heading"],"sourceRoot":""}