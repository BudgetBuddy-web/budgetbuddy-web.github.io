"use strict";(self.webpackChunkbudgetbuddy_client=self.webpackChunkbudgetbuddy_client||[]).push([[37],{9037:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var t=a(5043),n=a(5016),c=a(4570),l=a(4505),i=a(2145),r=a(579);const o=(0,t.lazy)(()=>Promise.all([a.e(58),a.e(464)]).then(a.bind(a,9464))),d=()=>{const{user:e}=(0,n.A)(),{celebrate:s,worry:a,encourage:d,idle:h}=(0,c.w)(),[m,x]=(0,t.useState)(null),[u,g]=(0,t.useState)([]),[v,j]=(0,t.useState)(!0),[N,p]=(0,t.useState)("current-month"),[y,b]=(0,t.useState)((new Date).getMonth()+1),[f,F]=(0,t.useState)((new Date).getFullYear()),w=(0,t.useCallback)(()=>{if(m&&m.summary){const e=Number(m.summary.totalIncome)||0,t=Number(m.summary.totalExpenses)||0,n=e>0?(e-t)/e*100:0;n>=60?s():n>=40?h():n>=20?d():a()}},[m,s,d,h,a]);(0,t.useEffect)(()=>{k()},[N,y,f]),(0,t.useEffect)(()=>{w()},[w]);const k=async()=>{try{const s=(await l.FU.getAll()).data;if(g(s.slice(0,5)),"all-time"===N){const a=s.filter(e=>"income"===e.type).reduce((e,s)=>e+s.amount,0),t=s.filter(e=>"expense"===e.type).reduce((e,s)=>e+s.amount,0),n=a-t,c={};s.filter(e=>"expense"===e.type).forEach(e=>{c[e.category]=(c[e.category]||0)+e.amount});const l=(null===e||void 0===e?void 0:e.allTimeGoal)||2e4,i=n,r=a>0?i/a*100:0,o=[];i>=l?o.push("Excellent! You saved \u20b9".concat(i.toFixed(2),", exceeding your goal by \u20b9").concat((i-l).toFixed(2))):i>0?o.push("You saved \u20b9".concat(i.toFixed(2)," (").concat(r.toFixed(1),"% of income)")):i<0&&o.push("Warning: You spent \u20b9".concat(Math.abs(i).toFixed(2)," more than you earned"));const d=Object.entries(c).sort((e,s)=>s[1]-e[1])[0];d&&o.push("Your highest expense category is ".concat(d[0]," (\u20b9").concat(d[1].toFixed(2),")")),x({period:{display:"All Time"},summary:{totalIncome:a,totalExpenses:t,balance:n,savingsGoal:l,savings:i,savingsPercentage:r},categoryBreakdown:c,insights:o,transactionCount:{income:s.filter(e=>"income"===e.type).length,expense:s.filter(e=>"expense"===e.type).length,total:s.length}})}else{const e=await l.Pt.getSummary({month:y,year:f});x(e.data)}}catch(s){i.oR.error("Failed to load dashboard data"),console.error(s)}finally{j(!1)}};if(v)return(0,r.jsx)("div",{className:"loading",children:(0,r.jsx)("div",{className:"spinner"})});if(!m)return(0,r.jsx)("div",{className:"container",children:"No data available"});const{totalIncome:S,totalExpenses:E,balance:C,savingsGoal:I,savings:A,savingsPercentage:T}=m.summary,{categoryBreakdown:Y,insights:B}=m,P=Number(S)||0,D=Number(E)||0,G=Number(C)||0,M=Number(I)||2e4,L=Number(A)||0,_=Number(T)||0,z=M>0?L/M*100:0;return(0,r.jsxs)("div",{className:"dashboard",children:[(0,r.jsxs)("div",{className:"dashboard-header",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{children:["Welcome back, ",null===e||void 0===e?void 0:e.name,"! \ud83d\udc4b"]}),(0,r.jsx)("p",{children:"Here's your financial overview"})]}),(0,r.jsxs)("div",{className:"header-controls",children:[(0,r.jsxs)("div",{className:"view-toggle",children:[(0,r.jsx)("button",{className:"toggle-btn ".concat("current-month"===N?"active":""),onClick:()=>p("current-month"),children:"\ud83d\udcc5 This Month"}),(0,r.jsx)("button",{className:"toggle-btn ".concat("all-time"===N?"active":""),onClick:()=>p("all-time"),children:"\ud83c\udf0d All Time"})]}),"current-month"===N&&(0,r.jsxs)("div",{className:"month-selector",children:[(0,r.jsx)("select",{value:y,onChange:e=>b(parseInt(e.target.value)),className:"month-select",children:Array.from({length:12},(e,s)=>(0,r.jsx)("option",{value:s+1,children:new Date(2e3,s,1).toLocaleString("default",{month:"short"})},s+1))}),(0,r.jsx)("select",{value:f,onChange:e=>F(parseInt(e.target.value)),className:"year-select",children:Array.from({length:5},(e,s)=>{const a=(new Date).getFullYear()-s;return(0,r.jsx)("option",{value:a,children:a},a)})})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-4 mb-4",children:[(0,r.jsxs)("div",{className:"stat-card income",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb0"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Total Income"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",P.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"stat-card expense",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb8"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Total Expenses"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",D.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"stat-card balance",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb5"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Balance"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",G.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"stat-card goal",children:[(0,r.jsx)("div",{className:"stat-icon",children:"\ud83c\udfaf"}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("p",{className:"stat-label",children:"Savings Goal"}),(0,r.jsxs)("h2",{className:"stat-value",children:["\u20b9",M.toFixed(2)]})]})]})]}),(0,r.jsxs)("div",{className:"card mb-4",children:[(0,r.jsx)("h3",{className:"card-title",children:"Savings Progress"}),(0,r.jsxs)("div",{className:"budget-progress",children:[(0,r.jsx)("div",{className:"progress-bar",children:(0,r.jsx)("div",{className:"progress-fill ".concat(z>=100?"good-savings":z<10?"low-savings":""),style:{width:"".concat(Math.min(z,100),"%")}})}),(0,r.jsxs)("div",{className:"progress-info",children:[(0,r.jsxs)("span",{children:[z.toFixed(1),"% of goal achieved"]}),(0,r.jsxs)("span",{children:["\u20b9",L.toFixed(2)," saved / \u20b9",M.toFixed(2)," goal"]})]}),(0,r.jsx)("div",{className:"progress-info",style:{marginTop:"8px",fontSize:"14px",color:"#666"},children:(0,r.jsxs)("span",{children:["\ud83d\udca1 Savings rate: ",_.toFixed(1),"% of income"]})})]})]}),B.length>0&&(0,r.jsxs)("div",{className:"card mb-4",children:[(0,r.jsx)("h3",{className:"card-title",children:"\ud83d\udca1 Insights"}),(0,r.jsx)("ul",{className:"insights-list",children:B.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]}),(0,r.jsx)(t.Suspense,{fallback:(0,r.jsxs)("div",{className:"grid grid-2 mb-4",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{className:"card-title",children:"Category Breakdown"}),(0,r.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Loading charts..."})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{className:"card-title",children:"Income vs Expenses"}),(0,r.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Loading charts..."})]})]}),children:(0,r.jsx)(o,{categoryBreakdown:Y,totalIncome:S,totalExpenses:E})}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{className:"card-title",children:"Recent Transactions"}),u.length>0?(0,r.jsx)("div",{className:"transactions-list",children:u.map(e=>(0,r.jsxs)("div",{className:"transaction-item",children:[(0,r.jsx)("div",{className:"transaction-icon",children:"income"===e.type?"\ud83d\udcb0":"\ud83d\udcb8"}),(0,r.jsxs)("div",{className:"transaction-details",children:[(0,r.jsx)("p",{className:"transaction-category",children:e.category}),(0,r.jsx)("p",{className:"transaction-note",children:e.note||"No description"})]}),(0,r.jsxs)("div",{className:"transaction-amount ".concat(e.type),children:["income"===e.type?"+":"-","\u20b9",e.amount.toFixed(2)]})]},e._id))}):(0,r.jsx)("p",{className:"text-center",children:"No transactions yet"})]})]})}}}]);
//# sourceMappingURL=37.447bbc94.chunk.js.map