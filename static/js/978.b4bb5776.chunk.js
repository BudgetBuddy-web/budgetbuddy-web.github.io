"use strict";(self.webpackChunkbudgetbuddy_client=self.webpackChunkbudgetbuddy_client||[]).push([[978],{1978:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var t=a(5043),c=a(4505),n=a(2145),r=a(5917),l=a(579);const i=()=>{const[e,s]=(0,t.useState)(null),[a,i]=(0,t.useState)(!0),[d,o]=(0,t.useState)((new Date).getMonth()+1),[h,x]=(0,t.useState)((new Date).getFullYear()),m=(0,t.useCallback)(async()=>{i(!0);try{const e=await c.Pt.getSummary({month:d,year:h});s(e.data)}catch(e){n.oR.error("Failed to load summary"),console.error(e)}finally{i(!1)}},[d,h]);(0,t.useEffect)(()=>{m()},[m]);if(a)return(0,l.jsx)("div",{className:"loading",children:(0,l.jsx)("div",{className:"spinner"})});if(!e)return(0,l.jsx)("div",{className:"container",children:"No data available"});const{totalIncome:j,totalExpenses:u,balance:p}=e.summary,{categoryBreakdown:N,insights:y,transactions:g=[]}=e;return(0,l.jsxs)("div",{className:"reports-page",children:[(0,l.jsx)("div",{className:"page-header",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{children:"Financial Reports"}),(0,l.jsx)("p",{children:"View your financial summaries and export data"})]})}),(0,l.jsx)("div",{className:"card mb-4",children:(0,l.jsxs)("div",{className:"period-selector",children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Month"}),(0,l.jsx)("select",{value:d,onChange:e=>o(parseInt(e.target.value)),className:"form-select",children:Array.from({length:12},(e,s)=>(0,l.jsx)("option",{value:s+1,children:new Date(2e3,s,1).toLocaleString("default",{month:"long"})},s+1))})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Year"}),(0,l.jsx)("select",{value:h,onChange:e=>x(parseInt(e.target.value)),className:"form-select",children:Array.from({length:5},(e,s)=>{const a=(new Date).getFullYear()-s;return(0,l.jsx)("option",{value:a,children:a},a)})})]}),(0,l.jsxs)("div",{className:"export-buttons",children:[(0,l.jsx)("button",{className:"btn btn-outline",onClick:async()=>{try{const e=await c.Pt.exportCSV({month:d,year:h}),s=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=s,a.setAttribute("download","transactions_".concat(d,"_").concat(h,".csv")),document.body.appendChild(a),a.click(),a.remove(),n.oR.success("CSV exported successfully")}catch(e){n.oR.error("Failed to export CSV"),console.error(e)}},children:"\ud83d\udcca Export CSV"}),(0,l.jsx)("button",{className:"btn btn-outline",onClick:async()=>{try{const e=await c.Pt.exportPDF({month:d,year:h}),s=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=s,a.setAttribute("download","transactions_".concat(d,"_").concat(h,".pdf")),document.body.appendChild(a),a.click(),a.remove(),n.oR.success("PDF exported successfully")}catch(e){n.oR.error("Failed to export PDF"),console.error(e)}},children:"\ud83d\udcc4 Export PDF"})]})]})}),(0,l.jsxs)("div",{className:"grid grid-3 mb-4",children:[(0,l.jsxs)("div",{className:"summary-card",children:[(0,l.jsx)("h3",{children:"Total Income"}),(0,l.jsxs)("p",{className:"amount income",children:["\u20b9",j.toFixed(2)]})]}),(0,l.jsxs)("div",{className:"summary-card",children:[(0,l.jsx)("h3",{children:"Total Expenses"}),(0,l.jsxs)("p",{className:"amount expense",children:["\u20b9",u.toFixed(2)]})]}),(0,l.jsxs)("div",{className:"summary-card",children:[(0,l.jsx)("h3",{children:"Net Balance"}),(0,l.jsxs)("p",{className:"amount ".concat(p>=0?"income":"expense"),children:["\u20b9",p.toFixed(2)]})]})]}),(0,l.jsxs)("div",{className:"card mb-4",children:[(0,l.jsx)("h3",{className:"card-title",children:"Expense Breakdown by Category"}),Object.keys(N).length>0?(0,l.jsx)("div",{className:"category-list",children:Object.entries(N).sort((e,s)=>s[1]-e[1]).map(e=>{let[s,a]=e;const t=(a/u*100).toFixed(1);return(0,l.jsxs)("div",{className:"category-item",children:[(0,l.jsxs)("div",{className:"category-header",children:[(0,l.jsx)("span",{className:"category-name",children:s}),(0,l.jsxs)("span",{className:"category-amount",children:["\u20b9",a.toFixed(2)]})]}),(0,l.jsx)("div",{className:"category-bar",children:(0,l.jsx)("div",{className:"category-fill",style:{width:"".concat(t,"%")}})}),(0,l.jsxs)("span",{className:"category-percentage",children:[t,"%"]})]},s)})}):(0,l.jsx)("p",{className:"text-center",children:"No expense data for this period"})]}),y.length>0&&(0,l.jsxs)("div",{className:"card mb-4",children:[(0,l.jsx)("h3",{className:"card-title",children:"\ud83d\udca1 Financial Insights"}),(0,l.jsx)("ul",{className:"insights-list",children:y.map((e,s)=>(0,l.jsx)("li",{children:e},s))})]}),(0,l.jsxs)("div",{className:"card transactions-section",children:[(0,l.jsxs)("div",{className:"section-header",children:[(0,l.jsx)("h3",{className:"card-title",children:"\ud83d\udccb Transaction Details"}),(0,l.jsx)("button",{className:"btn btn-primary",onClick:()=>window.print(),children:"\ud83d\udda8\ufe0f Print Report"})]}),g.length>0?(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsxs)("table",{className:"transactions-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Date"}),(0,l.jsx)("th",{children:"Type"}),(0,l.jsx)("th",{children:"Category"}),(0,l.jsx)("th",{children:"Amount"}),(0,l.jsx)("th",{children:"Note"})]})}),(0,l.jsx)("tbody",{children:g.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{children:[(0,l.jsx)("div",{children:(0,r.A)(new Date(e.date),"MMM dd, yyyy")}),(0,l.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:(0,r.A)(new Date(e.date),"HH:mm")})]}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"badge ".concat(e.type),children:e.type})}),(0,l.jsx)("td",{children:e.category}),(0,l.jsxs)("td",{className:"amount ".concat(e.type),children:["income"===e.type?"+":"-","\u20b9",e.amount.toFixed(2)]}),(0,l.jsx)("td",{children:e.note||"-"})]},e._id))}),(0,l.jsxs)("tfoot",{children:[(0,l.jsxs)("tr",{className:"total-row",children:[(0,l.jsx)("td",{colspan:"3",children:(0,l.jsx)("strong",{children:"Total"})}),(0,l.jsx)("td",{children:(0,l.jsxs)("strong",{className:"amount income",children:["+\u20b9",j.toFixed(2)]})}),(0,l.jsx)("td",{})]}),(0,l.jsxs)("tr",{className:"total-row",children:[(0,l.jsx)("td",{colspan:"3",children:(0,l.jsx)("strong",{children:"Total Expenses"})}),(0,l.jsx)("td",{children:(0,l.jsxs)("strong",{className:"amount expense",children:["-\u20b9",u.toFixed(2)]})}),(0,l.jsx)("td",{})]}),(0,l.jsxs)("tr",{className:"total-row highlight",children:[(0,l.jsx)("td",{colspan:"3",children:(0,l.jsx)("strong",{children:"Net Balance"})}),(0,l.jsx)("td",{children:(0,l.jsxs)("strong",{className:"amount ".concat(p>=0?"income":"expense"),children:["\u20b9",p.toFixed(2)]})}),(0,l.jsx)("td",{})]})]})]})}):(0,l.jsx)("p",{className:"text-center",children:"No transactions for this period"})]})]})}}}]);
//# sourceMappingURL=978.b4bb5776.chunk.js.map